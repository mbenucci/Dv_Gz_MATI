---
title: "Chapter3_sampling-map"
output: html_document
---

```{r setup, include=T}
knitr::opts_chunk$set(echo = TRUE)
```

```{r environment setup, include=F}
## R(v3.5.1 - Win)
.libPaths(c("D:\\Dropbox\\PhD Hull\\PhD docs\\Thesis\\R_stats\\rlib3.5_win", .libPaths("D:\\Dropbox\\PhD Hull\\PhD docs\\Thesis\\R_stats\\rlib3.5_win")))

## R(v3.5.1 - OSX)
#.libPaths(c("D:\\Dropbox\\PhD Hull\\PhD docs\\Thesis\\R_stats\\rlib3.5_osx", .libPaths("D:\\Dropbox\\PhD Hull\\PhD docs\\Thesis\\R_stats\\rlib3.5_osx")))

## R(v3.5.1 - Ubuntu)
#.libPaths(c("/home/mb/Dropbox/PhD Hull/PhD docs/Thesis/R_stats/rlib3.5_unix", .libPaths("/home/mb/Dropbox/PhD Hull/PhD docs/Thesis/R_stats/rlib3.5_unix")))
```

```{r directory setup, include=F}
dir()
#rm(list=ls())
ls()
```

## Setting working directory and packages

The analysis was done in R (R Core Team, 2018) using the environment and packages as specified below, and in `log_map-creation.txt`.

```{r packages loading, include=T}
pack.list = c("broom","devtools","dplyr","ggplot2","ggsn","leaflet","maps","maptools","mapview","raster","RColorBrewer","rgdal","rgeos","rworldmap","tmap")
new.packages = pack.list[!(pack.list %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages, repos="https://cran.rstudio.com")
lapply(pack.list, require, character.only=T)
```

## Plotting the map for Chapter 3 on DNA metabarcoding and MATI of invasive _D. villosus_ against non-invasive _G. zaddachi_.

```{r input data}
wb.sites = read.csv("maps/Wroxham_sites.csv")
gw.sites = read.csv("maps/Grafham_sites.csv")
rb.sites = read.csv("maps/Rockland_sites.csv")
lakes.coords = read.csv("maps/Dv_site_coords.csv")
```


Lakes coordinates include also a fourth lake which is part of this study, so it needs to be excluded from our current analysis.

```{r checking files plus removing one lake}
head(wb.sites)
head(gw.sites)
head(rb.sites)
head(lakes.coords)

# Removing not interested site
lakes.coords = lakes.coords[!(lakes.coords$ID == "Chasewater Reservoir"),]
```



```{r map plot}
uk_shape = readOGR("maps/shapefiles/GB_IRworld.shp")

uk_map = fortify(uk_shape)

ggplot(uk_map) +
  geom_polygon(aes(long,lat,group = group), fill="white", color="black") +
  geom_point(data=lakes.coords, aes(X, Y), color="black") +
  theme_void()

## FROM HERE!
```

## WRITING LOG FILE FOR R VERSION AND SESSION INFO

```{r log creation}
sink("log_map-creation.txt")
sessionInfo()
citation()
sink()

print("END")
```